# ===================================================================
# JupyterHub Configuration for AKS
# Test Deployment - Direct IP Access
# ===================================================================

# -------------------------------------------------------------------
# 1. Authentication - Native Authenticator
# -------------------------------------------------------------------
hub:
  config:
    JupyterHub:
      authenticator_class: nativeauthenticator.NativeAuthenticator
    
    Authenticator:
      admin_users:
        - sysadmin
      allowed_users:
        - sysadmin
        - user01
        - user02
        - user03
    
    NativeAuthenticator:
      open_signup: false
      minimum_password_length: 8
  
  # Database persistence for user credentials
  db:
    type: sqlite-pvc
    pvc:
      storage: 5Gi
      storageClassName: managed-csi
  
  # Schedule Hub on hubpool
  nodeSelector:
    agentpool: hubpool

# -------------------------------------------------------------------
# 2. Proxy Configuration
# -------------------------------------------------------------------
proxy:
  # Direct IP access via LoadBalancer
  service:
    type: LoadBalancer
  
  # Schedule Proxy on hubpool
  chp:
    nodeSelector:
      agentpool: hubpool

# -------------------------------------------------------------------
# 3. Single User Configuration
# -------------------------------------------------------------------
singleuser:
  # Schedule user pods on userpool (autoscaling pool)
  nodeSelector:
    agentpool: userpool
  
  # Storage configuration
  storage:
    type: dynamic
    capacity: 50Gi
    homeMountPath: /home/jovyan
    dynamic:
      storageClass: managed-csi
  
  # Resource limits per user
  cpu:
    limit: 4
    guarantee: 2
  memory:
    limit: 16G
    guarantee: 8G

# -------------------------------------------------------------------
# 4. Culling Configuration
# -------------------------------------------------------------------
cull:
  enabled: true
  timeout: 3600
  every: 600
  maxAge: 0